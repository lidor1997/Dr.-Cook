{"ast":null,"code":"import React,{useState,useRef}from\"react\";import{useUser}from\"../../context\";import{useNavigate}from\"react-router-dom\";import{routes}from\"../../routes\";import{appStorage}from\"../../services\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const Profile=()=>{const{user,handleUser}=useUser();const navigate=useNavigate();const[isMenuOpen,setMenuOpen]=useState(false);const menuRef=useRef(null);const toggleMenu=()=>{setMenuOpen(!isMenuOpen);};const handleSignOut=()=>{handleUser(null);setMenuOpen(false);appStorage.setToken(\"\");};// Close the menu if clicked outside\nconst handleClickOutside=event=>{if(menuRef.current&&!menuRef.current.contains(event.target)){setMenuOpen(false);}};React.useEffect(()=>{document.addEventListener(\"click\",handleClickOutside);return()=>{document.removeEventListener(\"click\",handleClickOutside);};},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",ref:menuRef,children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleMenu,children:/*#__PURE__*/_jsx(\"img\",{className:\"w-10 h-10 rounded-full border-2 border-white cursor-pointer\",src:user!==null&&user!==void 0&&user.id?\"/images/profile.png\":\"/images/graduation.png\",alt:\"User Avatar\"})}),isMenuOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg py-2 z-50\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-2 text-gray-800 text-sm font-medium\",children:[\"Hello, \",(user===null||user===void 0?void 0:user.name)||\"Guest\"]}),/*#__PURE__*/_jsx(\"hr\",{className:\"border-gray-200\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(user!==null&&user!==void 0&&user.id){handleSignOut();return;}navigate(routes.auth.login);setMenuOpen(false);},className:\"block w-full text-left px-4 py-2 text-gray-800 hover:bg-gray-100\",children:user!==null&&user!==void 0&&user.id?\"Sign Out\":\"Sign In\"})]})]});};","map":{"version":3,"names":["React","useState","useRef","useUser","useNavigate","routes","appStorage","jsx","_jsx","jsxs","_jsxs","Profile","user","handleUser","navigate","isMenuOpen","setMenuOpen","menuRef","toggleMenu","handleSignOut","setToken","handleClickOutside","event","current","contains","target","useEffect","document","addEventListener","removeEventListener","className","ref","children","onClick","src","id","alt","name","auth","login"],"sources":["C:/Semester 8/webproject/Dr.Cook-Web-Project-main/recipes-client/src/layout/Profile/Profile.tsx"],"sourcesContent":["import React, { useState, useRef } from \"react\";\nimport { useUser } from \"../../context\";\nimport { useNavigate } from \"react-router-dom\";\nimport { routes } from \"../../routes\";\nimport { appStorage } from \"../../services\";\n\nexport const Profile = () => {\n  const { user, handleUser } = useUser();\n  const navigate = useNavigate();\n\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  const toggleMenu = () => {\n    setMenuOpen(!isMenuOpen);\n  };\n\n  const handleSignOut = () => {\n    handleUser(null);\n    setMenuOpen(false);\n    appStorage.setToken(\"\");\n  };\n\n  // Close the menu if clicked outside\n  const handleClickOutside = (event: any) => {\n    if (menuRef.current && !menuRef.current.contains(event.target)) {\n      setMenuOpen(false);\n    }\n  };\n\n  React.useEffect(() => {\n    document.addEventListener(\"click\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside);\n    };\n  }, []);\n\n  return (\n    <div className=\"relative\" ref={menuRef}>\n      {/* Avatar */}\n      <button onClick={toggleMenu}>\n        <img\n          className=\"w-10 h-10 rounded-full border-2 border-white cursor-pointer\"\n          src={user?.id ? \"/images/profile.png\" : \"/images/graduation.png\"}\n          alt=\"User Avatar\"\n        />\n      </button>\n\n      {/* Dropdown Menu */}\n      {isMenuOpen && (\n        <div className=\"absolute right-0 mt-2 w-40 bg-white rounded-md shadow-lg py-2 z-50\">\n          <div className=\"px-4 py-2 text-gray-800 text-sm font-medium\">\n            Hello, {user?.name || \"Guest\"}\n          </div>\n          <hr className=\"border-gray-200\" />\n\n          <button\n            onClick={() => {\n              if (user?.id) {\n                handleSignOut();\n                return;\n              }\n              navigate(routes.auth.login);\n              setMenuOpen(false);\n            }}\n            className=\"block w-full text-left px-4 py-2 text-gray-800 hover:bg-gray-100\"\n          >\n            {user?.id ? \"Sign Out\" : \"Sign In\"}\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,MAAM,KAAQ,OAAO,CAC/C,OAASC,OAAO,KAAQ,eAAe,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,MAAM,KAAQ,cAAc,CACrC,OAASC,UAAU,KAAQ,gBAAgB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5C,MAAO,MAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAEC,IAAI,CAAEC,UAAW,CAAC,CAAGV,OAAO,CAAC,CAAC,CACtC,KAAM,CAAAW,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9B,KAAM,CAACW,UAAU,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAAAgB,OAAO,CAAGf,MAAM,CAAiB,IAAI,CAAC,CAE5C,KAAM,CAAAgB,UAAU,CAAGA,CAAA,GAAM,CACvBF,WAAW,CAAC,CAACD,UAAU,CAAC,CAC1B,CAAC,CAED,KAAM,CAAAI,aAAa,CAAGA,CAAA,GAAM,CAC1BN,UAAU,CAAC,IAAI,CAAC,CAChBG,WAAW,CAAC,KAAK,CAAC,CAClBV,UAAU,CAACc,QAAQ,CAAC,EAAE,CAAC,CACzB,CAAC,CAED;AACA,KAAM,CAAAC,kBAAkB,CAAIC,KAAU,EAAK,CACzC,GAAIL,OAAO,CAACM,OAAO,EAAI,CAACN,OAAO,CAACM,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAM,CAAC,CAAE,CAC9DT,WAAW,CAAC,KAAK,CAAC,CACpB,CACF,CAAC,CAEDhB,KAAK,CAAC0B,SAAS,CAAC,IAAM,CACpBC,QAAQ,CAACC,gBAAgB,CAAC,OAAO,CAAEP,kBAAkB,CAAC,CACtD,MAAO,IAAM,CACXM,QAAQ,CAACE,mBAAmB,CAAC,OAAO,CAAER,kBAAkB,CAAC,CAC3D,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEX,KAAA,QAAKoB,SAAS,CAAC,UAAU,CAACC,GAAG,CAAEd,OAAQ,CAAAe,QAAA,eAErCxB,IAAA,WAAQyB,OAAO,CAAEf,UAAW,CAAAc,QAAA,cAC1BxB,IAAA,QACEsB,SAAS,CAAC,6DAA6D,CACvEI,GAAG,CAAEtB,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEuB,EAAE,CAAG,qBAAqB,CAAG,wBAAyB,CACjEC,GAAG,CAAC,aAAa,CAClB,CAAC,CACI,CAAC,CAGRrB,UAAU,eACTL,KAAA,QAAKoB,SAAS,CAAC,oEAAoE,CAAAE,QAAA,eACjFtB,KAAA,QAAKoB,SAAS,CAAC,6CAA6C,CAAAE,QAAA,EAAC,SACpD,CAAC,CAAApB,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEyB,IAAI,GAAI,OAAO,EAC1B,CAAC,cACN7B,IAAA,OAAIsB,SAAS,CAAC,iBAAiB,CAAE,CAAC,cAElCtB,IAAA,WACEyB,OAAO,CAAEA,CAAA,GAAM,CACb,GAAIrB,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEuB,EAAE,CAAE,CACZhB,aAAa,CAAC,CAAC,CACf,OACF,CACAL,QAAQ,CAACT,MAAM,CAACiC,IAAI,CAACC,KAAK,CAAC,CAC3BvB,WAAW,CAAC,KAAK,CAAC,CACpB,CAAE,CACFc,SAAS,CAAC,kEAAkE,CAAAE,QAAA,CAE3EpB,IAAI,SAAJA,IAAI,WAAJA,IAAI,CAAEuB,EAAE,CAAG,UAAU,CAAG,SAAS,CAC5B,CAAC,EACN,CACN,EACE,CAAC,CAEV,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}